local WarningGuiThread = task.spawn(function()
    WarningUI = Instance.new("ScreenGui")
    Main = Instance.new("Frame")
    Background = Instance.new("Frame")
    TopBar = Instance.new("Frame")
    Title = Instance.new("TextLabel")
    CloseButton = Instance.new("TextButton")
    MinimizeButton = Instance.new("TextButton")
    Holder = Instance.new("Frame")
    UIListLayout = Instance.new("UIListLayout")
    Credits = Instance.new("TextLabel")
    TextBox = Instance.new("TextBox")
    ChatButton = Instance.new("TextButton")

    local Tween = function(Object, Time, Style, Direction, Property)
        return TweenService:Create(Object, TweenInfo.new(Time, Enum.EasingStyle[Style], Enum.EasingDirection[Direction]), Property)
    end

    -- Create the screen GUI
    WarningUI.Enabled = false
    WarningUI.Name = "WarningUI"
    WarningUI.Parent = CoreGui

    -- Main Frame
    Main.Name = "Main"
    Main.Parent = WarningUI
    Main.AnchorPoint = Vector2.new(.5, .5)
    Main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Main.BackgroundTransparency = 0
    Main.BorderSizePixel = 0
    Main.Position = UDim2.new(.5, 0, .5, 0)
    Main.Size = UDim2.new(0, 400, 0, 250)

    -- Rounded corners for Main
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 10)
    UICorner.Parent = Main

    -- Background Frame
    Background.Name = "Background"
    Background.Parent = Main
    Background.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Background.BorderSizePixel = 0
    Background.Size = UDim2.new(1, 0, .85, 0)

    -- Rounded corners for Background
    local BackgroundCorner = Instance.new("UICorner")
    BackgroundCorner.CornerRadius = UDim.new(0, 8)
    BackgroundCorner.Parent = Background

    -- TopBar
    TopBar.Name = "TopBar"
    TopBar.Parent = Main
    TopBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    TopBar.Size = UDim2.new(1, 0, .15, 0)

    -- Close Button (X)
    CloseButton.Name = "CloseButton"
    CloseButton.Parent = TopBar
    CloseButton.AnchorPoint = Vector2.new(1, 0)
    CloseButton.Position = UDim2.new(1, -5, 0, 5)
    CloseButton.Size = UDim2.new(0, 25, 0, 25)
    CloseButton.Text = "X"
    CloseButton.Font = Enum.Font.SourceSansBold
    CloseButton.TextColor3 = Color3.fromRGB(255, 0, 0)
    CloseButton.TextScaled = true
    CloseButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    CloseButton.BorderSizePixel = 0

    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 5)
    CloseCorner.Parent = CloseButton

    -- Rewiring Close Button Functionality
    CloseButton.MouseButton1Click:Connect(function()
        local FadeOut = Tween(Main, 0.5, "Sine", "Out", {BackgroundTransparency = 1})
        FadeOut:Play()
        FadeOut.Completed:Connect(function()
            WarningUI:Destroy()
        end)
    end)

    -- Minimize Button (-)
    MinimizeButton.Name = "MinimizeButton"
    MinimizeButton.Parent = TopBar
    MinimizeButton.AnchorPoint = Vector2.new(1, 0)
    MinimizeButton.Position = UDim2.new(1, -35, 0, 5)
    MinimizeButton.Size = UDim2.new(0, 25, 0, 25)
    MinimizeButton.Text = "-"
    MinimizeButton.Font = Enum.Font.SourceSansBold
    MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    MinimizeButton.TextScaled = true
    MinimizeButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    MinimizeButton.BorderSizePixel = 0

    local MinimizeCorner = Instance.new("UICorner")
    MinimizeCorner.CornerRadius = UDim.new(0, 5)
    MinimizeCorner.Parent = MinimizeButton

    local Minimized = false
    MinimizeButton.MouseButton1Click:Connect(function()
        if Minimized then
            Main:TweenSize(UDim2.new(0, 400, 0, 250), "Out", "Sine", 0.5)
            Minimized = false
        else
            Main:TweenSize(UDim2.new(0, 400, 0, 50), "Out", "Sine", 0.5)
            Minimized = true
        end
    end)

    -- Title
    Title.Name = "Title"
    Title.Parent = TopBar
    Title.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.new(0, 5, 0, 5)
    Title.Size = UDim2.new(0, 150, 0, 25)
    Title.Font = Enum.Font.SourceSansBold
    Title.Text = "Warning UI"
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.TextScaled = true

    -- Holder for Chat and TextBox
    Holder.Name = "Holder"
    Holder.Parent = Background
    Holder.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Holder.BackgroundTransparency = 1
    Holder.Position = UDim2.new(0, 10, 0.1, 0)
    Holder.Size = UDim2.new(1, -20, 0.75, 0)

    UIListLayout.Parent = Holder
    UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    UIListLayout.Padding = UDim.new(0, 10)

    -- Text Box
    TextBox.Name = "TextBox"
    TextBox.Parent = Holder
    TextBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    TextBox.BorderSizePixel = 0
    TextBox.Size = UDim2.new(1, 0, 0, 50)
    TextBox.Font = Enum.Font.SourceSans
    TextBox.PlaceholderText = "Enter something here..."
    TextBox.Text = ""
    TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    TextBox.TextScaled = true

    local TextBoxCorner = Instance.new("UICorner")
    TextBoxCorner.CornerRadius = UDim.new(0, 5)
    TextBoxCorner.Parent = TextBox

    -- Chat Button
    ChatButton.Name = "ChatButton"
    ChatButton.Parent = Holder
    ChatButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    ChatButton.BorderSizePixel = 0
    ChatButton.Size = UDim2.new(1, 0, 0, 50)
    ChatButton.Font = Enum.Font.SourceSansBold
    ChatButton.Text = "Open Chat"
    ChatButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ChatButton.TextScaled = true

    local ChatButtonCorner = Instance.new("UICorner")
    ChatButtonCorner.CornerRadius = UDim.new(0, 5)
    ChatButtonCorner.Parent = ChatButton

    -- Rewiring Chat Button Functionality
    ChatButton.MouseButton1Click:Connect(function()
        -- Call the existing chat logic here (replace with actual code)
        print("Chat Button Pressed")
    end)

    -- Credits
    Credits.Name = "Credits"
    Credits.Parent = Background
    Credits.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Credits.BackgroundTransparency = 1
    Credits.Position = UDim2.new(0, 10, .9, 0)
    Credits.Size = UDim2.new(1, -20, 0, 20)
    Credits.Font = Enum.Font.SourceSans
    Credits.Text = "Credits to 396abc"
    Credits.TextColor3 = Color3.fromRGB(255, 255, 255)
    Credits.TextScaled = true
    Credits.TextXAlignment = Enum.TextXAlignment.Right

    -- Fade-In Animation
    Main.BackgroundTransparency = 1
    local FadeIn = Tween(Main, 0.5, "Sine", "In", {BackgroundTransparency = 0})
    FadeIn:Play()

    -- Fix for original exit button
    Exit.MouseButton1Click:Connect(function()
        WarningUI:Destroy()
    end)
end)
